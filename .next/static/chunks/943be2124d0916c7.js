(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91645,e=>{"use strict";let t="/api/events",r="/api/registrations",a="/api/certificates";function s(e){return`http://localhost:8000/admin${e}`}e.s(["api",0,{events:()=>s(t),registrations:()=>s(r),checkIns:()=>s("/api/check-ins"),evaluations:()=>s("/api/evaluations"),certificates:()=>s(a),participants:()=>s("/api/participants"),eventById:e=>`${s(t)}/${e}/`,registrationById:e=>`${s(r)}/${e}/`,certificateById:e=>`${s(a)}/${e}/`}])},70065,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}e.s(["Card",()=>a])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},48425,e=>{"use strict";var t=e.i(71645);e.i(74080);var r=e.i(91918),a=e.i(43476),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,s)=>{let n=t.forwardRef((e,t)=>{let{asChild:n,...c}=e,l=n?r.Slot:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...c,ref:t})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{});e.s(["Primitive",()=>s])},10708,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(48425),s=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var n=e.i(47163);function c({className:e,...r}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>c],10708)},29629,e=>{"use strict";var t=e.i(43476),r=e.i(92989),a=e.i(71645),s=e.i(71689),n=e.i(23962),c=e.i(17923);let l=(0,e.i(75254).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var i=e.i(70065),d=e.i(67881),o=e.i(23750),u=e.i(10708),x=e.i(91645);function m(){let e=(0,r.useRouter)(),m=(0,a.useRef)(null),p=(0,a.useRef)(null),[h,g]=(0,a.useState)([]),[f,b]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),[y,N]=(0,a.useState)(""),[w,k]=(0,a.useState)(""),[C,S]=(0,a.useState)(0),[P,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch(x.api.events());if(!e.ok)throw Error("Unable to load events");let t=await e.json();g(t)}catch(e){console.error(e)}})()},[]);let B=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});m.current&&(m.current.srcObject=e,j(!0))}catch(e){alert("Unable to access camera. Using manual entry instead.")}},I=async()=>{if(!f)return void alert("Please select an event first");if(!y.trim())return void alert("Please enter a code or scan a QR code");try{let e=await fetch(`${x.api.checkIns()}/check-in-by-code/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:y.trim()})}),t=await e.json();if(!e.ok)return void alert(t.error||t.message||"Unable to check in participant.");k(`${t.participant_name??"Participant"}`),S(e=>e+1),R(!0),setTimeout(()=>{N(""),R(!1)},2e3)}catch(e){alert("Network error while checking in participant.")}};return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors",children:[(0,t.jsx)(s.ArrowLeft,{className:"w-4 h-4"}),"Back"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Event Check-In"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Select an event and scan participant QR codes or barcodes"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(i.Card,{className:"p-6 border border-border bg-card space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{className:"text-foreground font-semibold",children:"Select Event"}),(0,t.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"w-full mt-2 px-3 py-2 rounded-md border border-border bg-background text-foreground",children:[(0,t.jsx)("option",{value:"",children:"-- Choose an event --"}),h.map(e=>(0,t.jsx)("option",{value:e.id.toString(),children:e.title},e.id))]})]})}),(0,t.jsxs)(i.Card,{className:"p-6 border border-border bg-card space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(l,{className:"w-6 h-6 text-secondary"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"QR Code Scanner"})]}),v?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("video",{ref:m,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg border border-border",style:{maxHeight:"300px"}}),(0,t.jsx)("canvas",{ref:p,className:"hidden"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.Button,{className:"flex-1 gap-2",onClick:()=>{if(m.current&&p.current){let e=p.current.getContext("2d");e&&(e.drawImage(m.current,0,0),p.current.toDataURL("image/png"),console.log("[v0] QR code captured, would be processed here"))}},children:"Capture"}),(0,t.jsx)(d.Button,{variant:"outline",className:"flex-1",onClick:()=>{m.current&&m.current.srcObject&&(m.current.srcObject.getTracks().forEach(e=>e.stop()),j(!1))},children:"Stop Camera"})]})]}):(0,t.jsxs)(d.Button,{className:"w-full bg-secondary hover:bg-secondary/90 text-secondary-foreground gap-2",onClick:B,children:[(0,t.jsx)(l,{className:"w-4 h-4"}),"Start Camera"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pointer-events-none pl-3",children:(0,t.jsx)(n.QrCode,{className:"w-5 h-5 text-muted-foreground"})}),(0,t.jsx)(o.Input,{placeholder:"Or paste scanned code here...",value:y,onChange:e=>N(e.target.value),onKeyPress:e=>"Enter"===e.key&&I(),className:"pl-10 bg-background border-border text-base",autoFocus:!0})]}),(0,t.jsx)(d.Button,{className:"w-full bg-secondary hover:bg-secondary/90 text-secondary-foreground font-semibold",size:"lg",onClick:I,children:"Check In Participant"})]}),P&&(0,t.jsx)(i.Card,{className:"p-6 border-2 border-green-500 bg-green-50 space-y-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white",children:"âœ“"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-green-900",children:w}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:"Successfully checked in"})]})]})})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(i.Card,{className:"p-6 border border-border bg-card sticky top-20 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(c.BarChart3,{className:"w-5 h-5 text-secondary"}),(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Today's Stats"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,t.jsx)("p",{className:"text-4xl font-bold text-secondary",children:C}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Checked In"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:"12"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Total Expected"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-500",children:[Math.round(C/12*100),"%"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Attendance Rate"})]})]})]})})]})]})}e.s(["default",()=>m],29629)}]);